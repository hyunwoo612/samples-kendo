<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TelerikNodejsApp1</title>
    <link href="https://kendo.cdn.telerik.com/2018.1.117/styles/kendo.common-material.min.css" rel="stylesheet" type="text/css" />
    <link href="https://kendo.cdn.telerik.com/2018.1.117/styles/kendo.mobile.all.min.css" rel="stylesheet" type="text/css" />
    <link href="https://kendo.cdn.telerik.com/2018.1.117/styles/kendo.material.min.css" rel="stylesheet" type="text/css" />

    <script src="https://kendo.cdn.telerik.com/2018.1.117/js/jquery.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2018.1.117/js/jszip.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2018.1.117/js/kendo.all.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2018.1.117/js/kendo.aspnetmvc.min.js"></script>

    <link rel="stylesheet" href="/public/lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="/public/css/layout.css" />
    <link rel="stylesheet" href="/public/css/site.css" />
    <style>
        #left-pane, #right-pane {
            color: #000;
            background-color: #eee;
        }

        .pane-content {
            padding: 0 10px;
        }
    </style>
</head>
<body class="af-body">
    <div class="af-container">
        <header class="af-frame-fiexd af-header">
            <nav>
                <ul>
                    <li data-url="/">home</li>
                    <li data-url="users">user</li>
                </ul>
            </nav>
        </header>

        <div id="af-frame-body">

            <main class="af-frame-content frame-item">
                <!-- 텝 메뉴 -->
                <div style="margin-bottom:10px;background-color:#b7b7b7;">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#">Home</a>
                        </li>
                        <li>
                            <a href="#">사용자</a>
                        </li>
                    </ul>
                </div>

                <!-- 본문 내용  -->
                <div style="width:100%;height:100%;">
                    <!-- 네비게이션 -->
                    <div style="margin-bottom:10px;">
                        <div class="btn-group" style="width:100%;">
                            <div class="pull-left">
                                사용자 관리
                            </div>
                            <div class="pull-right">
                                <button type="button" class="btn btn-default">검색</button>
                                <button type="button" class="btn btn-info">추가</button>
                                <button type="button" class="btn btn-danger">삭제</button>
                                <button type="button" class="btn btn-success">저장</button>
                            </div>
                        </div>
                    </div>

                    <!-- 그리드 & 폼 -->
                    <div id="horizontal" style="height: 100%; width: 100%;">
                        <div id="left-pane">
                            <div class="pane-content">
                                <!-- 그리드 -->
                                <div id="grid1"></div>
                            </div>
                        </div>
                        <div id="right-pane">
                            <div class="pane-content">
                                <!-- 폼 스타일 -->
                                <form>
                                    <div class="form-group row">
                                        <label for="OrderId" class="col-sm-3 col-form-label">Order Id</label>
                                        <div class="col-sm-9">
                                            <input type="text" readonly class="form-control" id="OrderId" value="3" style="width:85%" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="Freight" class="col-sm-3 col-form-label">Freight</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="Freight" value="1581" style="width:85%" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="OrderDate" class="col-sm-3 col-form-label">Order Date</label>
                                        <div class="col-sm-9">
                                            <input class="form-control" id="OrderDate" value="2017-02-08" style="width:85%" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="ShipName" class="col-sm-3 col-form-label">Ship Name</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="ShipName" value="ShipName 159" style="width:85%" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="ShipCity" class="col-sm-3 col-form-label">Ship City</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="ShipCity" value="ShipCity 159" style="width:85%" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="AutoComplete" class="col-sm-3 col-form-label">AutoComplete</label>
                                        <div class="col-sm-9">
                                            <input type="text" class="form-control" id="AutoComplete" value="" style="width:85%" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="MultiSelect" class="col-sm-3 col-form-label">MultiSelect</label>
                                        <div class="col-sm-9">
                                            <select id="MultiSelect" multiple="multiple" style="width:85%">
                                                <option>item1</option>
                                                <option>item2</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-offset-3 col-sm-8">
                                            <button type="button" class="btn btn-primary" data-button="save">
                                                Save
                                            </button>
                                            <button type="button" class="btn" data-button="save">
                                                Cancel
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

            </main>
            <aside class="af-frame-aside frame-item">
                Ad aside Main
            </aside>
        </div><!-- af-frame-body -->

        <!-- 푸터 -->
        <footer class="af-frame-fiexd af-footer">
            Copyright
        </footer>
    </div><!-- af-container -->

    <script type="text/javascript">
        var dom = $;
        var af = {};

        // af 기본 함수 스타트 각종 Init 및 bind 실행
        af.pageStart = function () {
            $("#tabstrip").kendoTabStrip({
                animation: {
                    open: {
                        effects: "fadeIn"
                    }
                }
            });

            $("#horizontal").kendoSplitter({
                panes: [
                    { collapsible: true },
                    { collapsible: true }
                ]
            });

            // 그리드 초기화
            af.gridView.initView();

            // 폼 초기화
            af.formView.initView();
        }

        // 그리드 view 설정
        af.gridView = {
            initView: function () {
                var _this = this;

                var crudServiceBaseUrl = "./api/grid";
                var dataSource = new kendo.data.DataSource({
                    serverFiltering: true,
                    serverPaging: true,
                    page: 1,
                    pageSize: 10,
                    total: 0,
                    batch: true,
                    filter: [],
                    schema: {   // 데이터 스키마 정의
                        data: "Data",
                        total: 'Total',
                        errors: "Errors",
                        model: {
                            id: "OrderId",
                            fields: {                           // 데이터 컬럼 정의
                                userId: { type: "number", editable: false, nullable: true },
                                userName: { type: "string", defaultValue: '사용자명', validation: { required: true } },
                                regDate: { type: "date", defaultValue: new Date(), validation: { required: true } },
                                email: { type: "string", defaultValue: '이메일' },
                                workClass: { type: "string", defaultValue: '업무분류' }
                            }
                        }
                    },
                });

                this.target = dom("#grid1").kendoGrid({
                    toolbar: [
                        { name: "create", text: "추가" },
                        { name: "cancel", text: "취소" }
                    ],
                    //scrollable: true,
                    dataSource: dataSource,                 //datasource를 사용하여 초기화
                    //height: 550,
                    resizable: true,
                    filterable: true,                           // 필터 사용 여부
                    sortable: true,                             // 정렬 사용 여부
                    selectable: true,                           // 선택 가능 여부, multiple row, multiple cell
                    editable: "popup",                      // 수정 모드
                    pageable: {
                        buttonCount: 7
                    },
                    filterable: {
                        messages: {
                            selectedItemsFormat: "{0} selected items"
                        }
                    },
                    columns: [                                  // 그리드 컬럼 정의
                        { title: "ID", field: "userId", filterable: false, encoded: true, width: "80px" },
                        { title: "사용자명", field: "userName", filterable: false, encoded: true, width: "120px" },
                        { title: "등록일", field: "regDate", format: "{0:yyyy/MM/dd}", width: "160px" },
                        { title: "이메일", field: "email", filterable: false, encoded: true, width: "200px" },
                        { title: "업무분류", field: "workClass", width: "150px" },
                        { command: ["edit", "destroy"], title: "&nbsp;", width: "250px" }
                    ]
                });

                var list = [
                    { userId: 1, userName: "신현우1", regDate: "2018-01-01", email: "hwshin@superjump.si", workClass: "dev" },
                    { userId: 2, userName: "신현우2", regDate: "2018-01-02", email: "hwshin@superjump.si" },
                    { userId: 3, userName: "신현우3", regDate: "2018-01-03", email: "hwshin@superjump.si" },
                    { userId: 4, userName: "신현우4", regDate: "2018-01-04", email: "hwshin@superjump.si" },
                    { userId: 5, userName: "신현우5", regDate: "2018-01-05", email: "hwshin@superjump.si" },
                    { userId: 6, userName: "신현우6", regDate: "2018-01-06", email: "hwshin@superjump.si" },
                    { userId: 7, userName: "신현우7", regDate: "2018-01-07", email: "hwshin@superjump.si" },
                    { userId: 8, userName: "신현우8", regDate: "2018-01-08", email: "hwshin@superjump.si" },
                    { userId: 9, userName: "신현우9", regDate: "2018-01-01", email: "hwshin@superjump.si" },
                    { userId: 10, userName: "신현우10", regDate: "2018-01-01", email: "hwshin@superjump.si" },
                    { userId: 11, userName: "신현우11", regDate: "2018-01-01", email: "hwshin@superjump.si" },
                    { userId: 12, userName: "신현우12", regDate: "2018-01-01", email: "hwshin@superjump.si" },
                    { userId: 13, userName: "신현우13", regDate: "2018-01-01", email: "hwshin@superjump.si" }
                ];
                dataSource.fetch(function () {
                    dataSource.data(list);
                });
            }
        }

        // 폼 view 설정
        af.formView = {
            initView: function () {
                // kendoNumericTextBox
                dom("#Freight").kendoNumericTextBox({
                    format: "n2",
                    min: 1,
                    step: 1
                });

                // kendoDatePicker
                dom("#OrderDate").kendoDatePicker({
                    format: "yyyy/MM/dd",
                    animation: {
                        close: {
                            effects: "fadeOut zoom:out",
                            duration: 300
                        },
                        open: {
                            effects: "fadeIn zoom:in",
                            duration: 300
                        }
                    }
                });

                // kendoDropDownList -> 정의된 목록에서만 선택가능
                dom("#ShipName").kendoDropDownList({
                    dataSource: {
                        data: ["ShipName 159", "ShipName 166"]
                    },
                    animation: false
                });

                // kendoComboBox -> 사용자 정의 목록추가 가능
                dom("#ShipCity").kendoComboBox({
                    dataSource: {
                        data: ["ShipCity 159", "ShipCity 166"]
                    },
                    animation: false
                });

                // kendoAutoComplete
                dom("#AutoComplete").kendoAutoComplete({
                    autoWidth: true,
                    dataSource: {
                        data: ["hwshin", "rchcomm"]
                    },
                    animation: false
                });

                // kendoMultiSelect
                dom("#MultiSelect").kendoMultiSelect({
                    dataSource: {
                        data: ["hwshin", "rchcomm"]
                    },
                    animation: {
                        open: {
                            effects: "zoom:in",
                            duration: 300
                        }
                    }
                });
            }
        }
        function resizeGrid() {
            $("#grid").data("kendoGrid").resize();
        }

        $(window).resize(function () {
            resizeGrid();
        });
        $(document).ready(function () {
            af.pageStart();

            $(".af-frame-fiexd").on("click", "li", function () {
                var url = $(this).data("url");
                if (url) {
                    $(location).attr('href', url);
                } else {
                    alert("준비중..")
                }
            });
        });
    </script>
</body>
</html>
